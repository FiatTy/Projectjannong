<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>iCREAM - Ice Cream Shop Website Template</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="Free HTML Templates" name="keywords">
  <meta content="Free HTML Templates" name="description">

  <!-- Favicon -->
  <link href="img/favicon.ico" rel="icon">

  <!-- Google Web Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

  <!-- Libraries Stylesheet -->
  <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

  <!-- Customized Bootstrap Stylesheet -->
  <link href="css/style.css" rel="stylesheet">
</head>

<body>
  <!-- Topbar Start -->

  <!-- Topbar End -->


  <!-- Navbar Start -->
  <div class="container-fluid position-relative nav-bar p-0">
    <div class="container-lg position-relative p-0 px-lg-3" style="z-index: 9;">
      <nav class="navbar navbar-expand-lg bg-white navbar-light shadow p-lg-0">
        <a href="index.html" class="navbar-brand d-block d-lg-none">
          <h1 class="m-0 display-4 text-primary"><span class="text-secondary">i</span>CREAM</h1>
        </a>
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
          <div class="navbar-nav ml-auto py-0">
            <a href="index.html" class="nav-item nav-link">Home</a>
            <a href="about.html" class="nav-item nav-link">About</a>
            <a href="product.html" class="nav-item nav-link">Product</a>
          </div>
          <a href="index.html" class="navbar-brand mx-5 d-none d-lg-block">
            <h1 class="m-0 display-4 text-primary"><span class="text-secondary">Uruguay i</span>CREAM</h1>
          </a>
          <div class="navbar-nav mr-auto py-0">
            <a href="login.html" class="nav-item nav-link active">Login</a>
            <a href="order.html" class="nav-item nav-link">Order</a>
            <a href="contact.html" class="nav-item nav-link">Contact</a>
          </div>
        </div>
      </nav>
    </div>
  </div>
  <!-- Navbar End -->


  <!-- Header Start -->
  <div class="jumbotron jumbotron-fluid page-header" style="margin-bottom: 90px;">
    <div class="container text-center py-5">
      <h1 class="text-white display-3 mt-lg-5">Login</h1>
      <div class="d-inline-flex align-items-center text-white">
        <p class="m-0"><a class="text-white" href="">Home</a></p>
        <i class="fa fa-circle px-3"></i>
        <p class="m-0">Login</p>
      </div>
    </div>
  </div>
  <!-- Header End -->


  <!-- Contact Start -->
  <!DOCTYPE html>
  <html lang="th">

  <head>
    <meta charset="UTF-8">
    <title>Login / Register</title>
    <link rel="stylesheet" href="auth.css">

  </head>

  <body class="auth-page">

    <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-md-6">

          <!-- Switch Tabs -->
          <ul class="nav nav-tabs mb-4 justify-content-center" id="authTab">
            <li class="nav-item">
              <a class="nav-link active" id="login-tab" href="#" onclick="showForm('login')">Sign In</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="register-tab" href="#" onclick="showForm('register')">Register</a>
            </li>
          </ul>

          <!-- Login Form -->
          <div class="card p-4 shadow-sm" id="loginForm">
            <h4 class="text-center text-pink mb-4">Sign In</h4>
            <form action="/login" method="POST">
              <div class="form-group">
                <input id="login-email" name="login-email" type="text" class="form-control" placeholder="Email" required>
              </div>
              <div class="form-group">
                <input id="login-password" name="login-password" type="password" class="form-control"  placeholder="Password" required>
              </div>
              <button  id="login-button" type="submit" class="btn btn-success btn-block">LOGIN</button>
            </form>
          </div>

          <!-- Register Form -->
          <div class="card p-4 shadow-sm d-none" id="registerForm">
            <h4 class="text-center text-pink mb-4">Register</h4>
            <form action="/register" method="POST">
              <div class="form-row">
                <div class="form-group col-md-6">
                  <input id="FnameReg" name="FnameReg" type="text" class="form-control" placeholder="First name"
                    required>
                </div>
                <div class="form-group col-md-6">
                  <input id="LnameReg" name="LnameReg" type="text" class="form-control" placeholder="Last name"
                    required>
                </div>
              </div>
              <div class="form-group">
                <select id="categoryReg" name="categoryReg" class="form-control" required>
                  <option value="">Role</option>
                  <option value="student">Student</option>
                  <option value="worker">Worker</option>
                  <option value="Ordinary people">Ordinary people</option>
                </select>
              </div>

              <div class="form-group">
                <input id="EmailReg" name="EmailReg" type="email" class="form-control" placeholder="Email" required>
              </div>
              <div class="form-group">
                <input id="PasswordReg" name="PasswordReg" type="password" class="form-control" placeholder="Password"
                  required>
              </div>
              <input id="submit-reg" type="submit" onclick="RegSubmit(event)" class="btn btn-pink btn-block"
                value="Register">
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      function showForm(form) {
        document.getElementById('loginForm').classList.toggle('d-none', form !== 'login');
        document.getElementById('registerForm').classList.toggle('d-none', form !== 'register');

        document.getElementById('login-tab').classList.toggle('active', form === 'login');
        document.getElementById('register-tab').classList.toggle('active', form === 'register');
      }
    </script>
  </body>

  </html>

  <!-- Contact End -->


  <!-- Footer Start -->
  <div class="container-fluid footer bg-light py-5" style="margin-top: 90px;">
    <div class="container text-center py-5">
      <div class="row">
        <div class="col-12 mb-4">
          <a href="index.html" class="navbar-brand m-0">
            <h1 class="m-0 mt-n2 display-4 text-primary"><span class="text-secondary">i</span>CREAM</h1>
          </a>
        </div>

        <div class="col-12 mt-2 mb-4">
          <div class="row">
            <div class="col-sm-6 text-center text-sm-right border-right mb-3 mb-sm-0">
              <h5 class="font-weight-bold mb-2">Get In Touch</h5>
              <p class="mb-2">Chiang mai university <br> CMU Food Center 1st Floor </br> </p>
              <p class="mb-0">+66 08888888888</p>
            </div>
            <div class="col-sm-6 text-center text-sm-left">
              <h5 class="font-weight-bold mb-2">Opening Hours</h5>
              <p class="mb-2">Mon – Sat, 8AM – 5PM</p>
              <p class="mb-0">Sunday: Closed</p>
            </div>
          </div>
        </div>
        <div class="col-12">
          <p class="m-0">&copy; <a href="#">Domain</a>. All Rights Reserved. Designed by <a
              href="https://htmlcodex.com">HTML Codex</a>
          </p>
        </div>
      </div>
    </div>
  </div>
  <!-- Footer End -->


  <!-- Back to Top -->
  <a href="#" class="btn btn-secondary px-2 back-to-top"><i class="fa fa-angle-double-up"></i></a>


  <!-- JavaScript Libraries -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/waypoints/waypoints.min.js"></script>
  <script src="lib/owlcarousel/owl.carousel.min.js"></script>
  <script src="lib/isotope/isotope.pkgd.min.js"></script>
  <script src="lib/lightbox/js/lightbox.min.js"></script>

  <!-- Contact Javascript File -->
  <script src="mail/jqBootstrapValidation.min.js"></script>
  <script src="mail/contact.js"></script>

  <!-- Template Javascript -->
  <script src="js/main.js"></script>

  <script>

    function loadDoc(url, cFunction) {
      const xhttp = new XMLHttpRequest();
      xhttp.onload = function () { cFunction(this); }
      xhttp.open("GET", url);
      xhttp.send();
    }

    async function RegSubmit(e) {
      e.preventDefault();
      console.log('Hi');

      const fname = document.getElementById('FnameReg').value;
      const lname = document.getElementById('LnameReg').value;
      const email = document.getElementById('EmailReg').value;
      const password = document.getElementById('PasswordReg').value;
      const category = document.getElementById('categoryReg').value;
/*       const occupation = document.getElementById('occupation-list').value; */

      const data = { fname, lname, email, password, category };

      //console.log(email);
      const response = await fetch('http://localhost:4000/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      const result = await response.json();
        alert(result.status);
    };

    document.getElementById("login-button").addEventListener("click", async (e) => {
      e.preventDefault();
      const email = document.getElementById("login-email").value.trim();
      const password = document.getElementById("login-password").value.trim();
      if (!email || !password) return;

      const credentials = { email, password };

      try {
        const response = await fetch("http://localhost:4000/api/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(credentials),
        });

        const result = await response.json();
        alert(result.status);
      } catch (err) {
        console.error("Login error:", err);
      }
    });

  </script>
</body>

</html>